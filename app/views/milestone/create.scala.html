@(title:String, form: Form[Milestone], projectInst: Project)


@import utils.TemplateHelper._
@project.projectMngMain(title, projectInst) {
    @views.html.prjmenu(projectInst, utils.MenuType.PROJECT_SETTING, "")

    <div class="form-wrap milestone frm-wrap">
        <form class="nm" action="@routes.MilestoneApp.newMilestone(projectInst.owner, projectInst.name)" method="post">
            <div class="inner left">
            	<dl>
            		<dt>
		                <div class="n-alert hide" id="title_error">
		                    <div class="n-inner">
		                        <span class="msg">타이틀을 입력해주세요.</span>
		                        <a href="#!/close" class="ico btn-delete"></a>
		                    </div>
		                </div>
            			<label for="title">새 마일스톤의 제목을 입력해주세요</label>
            		</dt>
            		<dd>
						<input type="text" name="title" id="title" class="text" placeholder="">
					</dd>
					
					<dt>
		                <div class="n-alert hide" id="contents_error">
		                    <div class="n-inner">
		                        <span class="msg">내용을 입력해주세요.</span>
		                        <a href="#!/close" class="ico btn-delete"></a>
		                    </div>
		                </div>
		                <label for="contents">내용을 입력해주세요</label>
		            </dt>
		            <dd>
						<textarea class="textarea" id="contents" name="contents"></textarea>
					</dd>
            	</dl>

                <div class="actions">
                    <button type="submit" class="n-btn orange med btn-transparent save">SAVE</button>
                    <a href="@routes.MilestoneApp.manageMilestones(projectInst.owner, projectInst.name)" class="n-btn gray med">CANCEL</a>
                </div>
            </div>
            
            <div class="inner right bubble-wrap dark-gray">
                <p>마일스톤 상태</p>
                <div>
               		<input type="radio" name="state" value="@State.OPEN" id="milestone-open" class="radio-btn" checked="checked"><label for="milestone-open" class="bold">Open</label>
               		&nbsp;
               		<input type="radio" name="state" value="@State.CLOSED" id="milestone-close" class="radio-btn"><label for="milestone-close" class="bold">Closed</label>
                </div>
                <hr/>
                <p>완료일을 선택하세요.</p>
                <div class="n-alert hidden">
                    <div class="n-inner">
                        <span class="msg">완료일을 입력해주세요.</span>
                        <a href="#!/close" class="ico btn-delete"></a>
                    </div>
                </div>
                <label for="dueDate">
                    <input type="text" name="dueDate" id="dueDate" class="validate due-date">
                </label>
                <div id="datepicker" class="date-picker"></div>

            </div>
        </form>
    </div>

    <script type="text/javascript">nforge.require('milestone.manage');</script>
    <style type="text/css">
        @@IMPORT url(@getCSSLink("pikaday"));
    </style>
    <script src="@getJSLink("lib/moment.min")" type="text/javascript"></script>
    <script src="@getJSLink("lib/pikaday")" type="text/javascript"></script>
    
    <script type="text/javascript">
	$(document).ready(function(){
		
		// 날짜 선택 영역 설정 
		// @@requires Pikaday (https://github.com/dbushell/Pikaday) 
		(function(sInputId, sContainer){
			var elInput = $(sInputId);
			var elContainer = $(sContainer);
			var sDateFormat = "YYYY-MM-DD";
			
			var oPicker = new Pikaday({
				"format": sDateFormat,
				"onSelect": function(oDate){
					elInput.val(this.toString());
				}
			});
			
			elContainer.append(oPicker.el);
			
			elInput.attr("value", oPicker.getMoment().format(sDateFormat));
			elInput.blur(function(){
				oPicker.setDate(this.value);
			});
			
		})("#dueDate", "#datepicker");
		
	});
</script>
}
