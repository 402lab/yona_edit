@(message: String)(projectForm: Form[Project], id: Long)

@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.render) } 


@projectMngMain(message)(id) {
       @form(action = routes.ProjectApp.saveSetting(id), 'class -> "form-horizontal", 'enctype -> "multipart/form-data", 'id -> "saveSetting"){
        <div class="row">
            <fieldset>                
                <div class="icon-question-sign" href = "#" id="project_name" rel="popover"
                    data-content="특수문자, 공백, 한글은 프로젝트 이름으로 사용하실 수 없습니다."
                    data-original-title="이름 규칙"
                ></div>
                @inputText(
                    projectForm("name"),
                    '_label -> "프로젝트 이름",
                    '_showConstraints -> true,
                    '_help -> "필수 입력 사항"
                )
                
                @textarea(
                    projectForm("overview"),
                    '_label -> "설명",
                    'cols -> 50,
                    '_help -> "선택 입력 사항"
                )
                
                <div class="thumbnail">
                @if(projectForm("logoPath").value != null) {
                    <img src="@routes.Assets.at("uploadFiles/" + projectForm("logoPath").value)" alt="" width="234" height="168">
                    <h5>@projectForm("logoPath").value</h5>
                } else {
                    <img src="@routes.Assets.at("images/project_image_default.jpg")" alt="" width="234" height="168">
                }
                </div>                                
                                
                @inputFile(
                    projectForm("logoPath"),
                    '_label -> "로고"
                )
                
                <div class="icon-question-sign" href = "#" id="share_option_explanation" rel="popover"
                    data-content="비공개 프로젝트도 프로젝트 이름,설명,로고 등은 모든 사용자가 볼수 있습니다."
                    data-original-title="공개 설정"
                ></div>
                @inputRadioGroup(
                    projectForm("share_option"),
                    options = options("false"->"비공개", "true"->"공개"),
                    '_label -> "공개설정"
                )
                
                @inputText(
                    projectForm("url"),
                    '_label -> "사이트 URL",
                    '_showConstraints -> false
                )
            </fieldset>
        </div>
        <div class="row">
            <div class="actions">
                <input type="submit" class="btn btn-primary" value="저장">
            </div>
        </div>
    }
    
   
    <table class="table table-bordered">
        <thead>
            <tr>
                <th><strong>프로젝트 삭제</strong></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <p align="left"><strong>프로젝트를 삭제하게되면 코드,위키,이슈관리 등 모든 데이터가 삭제되면 한번 삭제된 데이터는 복구가 불가능합니다.</strong></p>
                    <p align="right">
                        <input type="checkbox" id="acceptDeletion"> <span>프로젝트를 삭제하는데 동의합니다.</span>
                    </p>
                    <a id="deletion" data-toggle="modal" href="#alertDeletion" class="btn btn-danger">프로젝트 삭제</a>
                </td>    
            </tr>
        </tbody>
    </table>
    
    <div class="modal hide" id="alertDeletion">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3>프로젝트를 삭제하시겠습니까?</h3>
        </div>
        <div class="modal-body">
            <p> 프로젝트를 삭제하게되면 코드,위키,이슈관리 등 모든 데이터가 삭제되며 한번 삭제된 데이터는 복구가 불가능합니다. </p>
            <p> 정말로 삭제하시겠습니까? </p>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">아니오</a>
            <a href="@routes.ProjectApp.deleteProject(id)" class="btn btn-danger">예, 삭제하겠습니다.</a>
        </div>
    </div>
    
    <script>  
        window.onload = function(){
            var reg = /\.(gif|bmp|jpg|jpeg|png)$/i;
            $("input[id='logoPath']").change(function(){
                if (!reg.test($(this).val())) { 
                    alert('이미지 파일이 아닙니다.');
                    $(this).val('');
                } else { 
                    return $("form[id='saveSetting']").submit(); 
                }     
            });
            $("#project_name").popover();
            $("#share_option_explanation").popover();
            $("#terms").popover();
            $("#deletion").click(function() {
                if($("#acceptDeletion").is(":checked")) {
                    return true;    
                }else {
                    alert("프로젝트 삭제에 동의하여야 합니다.");
                    return false;
                } 
            });
        }
        
    </script>    
}
