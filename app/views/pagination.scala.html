@(page:Page[_ <: play.db.ebean.Model], pageNum:Int, func:(Int, String, String) => Call, order:String, key:String)

@{
    var currentPageNum = page.getPageIndex + 1
    var lastPageNum = page.getTotalPageCount()
    var str = ""
    
    if(currentPageNum <= pageNum/2) {
        currentPageNum = pageNum/2 +1
    } else if(currentPageNum > lastPageNum - pageNum/2) {
        currentPageNum = lastPageNum - pageNum/2 - 1
    }
    
    str += "<div class='pagination'><ul>"
    
    if(page.hasPrev){
        str +=  makeLink("Prev", page.getPageIndex)
    } else {
        str += <li class="disabled"><a>Prev</a></li>
    }
    
    if(lastPageNum < pageNum){
        for(x <- (1 to lastPageNum)){
            str += makeLink(x + "", x)
        }
    } else {
        for( x <- (currentPageNum - pageNum/2 to currentPageNum + pageNum/2)){
           str += makeLink(x + "", x)
        }
    }
    
    if(page.hasNext){
           str += makeLink("Next",page.getPageIndex + 2)
    } else {
           str += <li class="disabled"><a>Next</a></li>
    }
    
    str += "</ul></div>"
    
    Html(str)
}

@makeLink(title:String, index:Int) = {
    <li><a href="@func(index, order, key)">@title</a></li>
}