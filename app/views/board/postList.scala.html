@(title:String, page:Page[Post], order:String, currentKey:String)

@header(label:String, key:String) = {
    <th>
        <a href="@link(key)")">@label</a>
        @if(key == currentKey){
        @if(order == "desc"){
        <i class="icon-chevron-down"></i>
        } else {
        <i class="icon-chevron-up"></i>
        }
        }
    </th>
}

@link(newKey:String) = @{

    var gOrder = ""
    if(currentKey == newKey){
        if(order == "asc"){
            gOrder = "desc"
        } else {
            gOrder = "asc"
        }
    } else {
        gOrder = "desc"
    }
    routes.BoardApp.boardList(page.getPageIndex+ 1, gOrder, newKey)
}

@main(title) {
  <div class="row">
    <div class="span12">
      <div class="pull-right">
        <form class="form-search form-inline">
          <input type="text" class="search-query">
            <button type="submit" class="btn"><i class="icon-search"></i></button>
            <a class="btn btn-primary" href="@routes.BoardApp.newPost()" >새글</a>
        </form>
      </div>    
    </div>  
  </div>

  <div class="row">  
    <div class="span12">
	    <ul class="nav nav-tabs" id="board_list">
	    	<li class="active"><a href="">전체</a></li>
	    	<li><a href="">Q&A</a></li>
	    </ul>
	    @if(page.getTotalRowCount == 0){
	    <div class="well">
	    	<p>등록된 글이 없습니다.</p>
	    </div>
	    }else{
	    <table class="table table-striped">
	    	<thead>
	    		<tr>
	    		    @header("#", "id")
	    		    @header("제목", "title")
	    		    <th>작성자</th>
	    		    @header("나이", "date")
	    		</tr>
	    	</thead>
	    	<tbody>
	    		@for(post <- page.getList()){
	    		<tr>
	    			<td>@post.id</td>
	    			<td><a href="@routes.BoardApp.post(post.id)">@post.title [@post.commentCount]</a></td>
	    			<td>@post.findWriter()</td>
	    			<td>@post.calcPassTime()</td>
	    		</tr>
	    		}
	    	</tbody>
	    </table>
	    }
    </div>
  </div>

    <div class="row">  
        <div class="span6 offset4">
	       @pagination(page, 5, routes.BoardApp.boardList, order, currentKey)
        </div>
        <div class="span2">
            <a class="btn pull-right" href=""><i class="icon-ok"></i>자동알림</a>
        </div>
    </div>
}